<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Petronas Twin Towers â€“ AR Redirect</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Fallback: if script fails, bounce to homepage after 10s -->
  <meta http-equiv="refresh" content="10; url=https://dhukanestapha.github.io/kl-ar/">
</head>
<body>
<script>
  // --- Configure your asset URLs (case-sensitive!) ---
  const BASE = 'https://dhukanestapha.github.io/kl-ar';
  const GLB  = BASE + '/assets/petronas_twin_tower.glb';   // Android
  const USDZ = BASE + '/assets/PETRONAS_TWIN_TOWER.usdz';  // iOS

  const enc = encodeURIComponent;
  const sceneViewerHttps = 'https://arvr.google.com/scene-viewer/1.0?file=' + enc(GLB) +
    '&mode=ar_preferred&title=' + enc('Petronas Twin Towers');
  const sceneViewerIntent = 'intent://arvr.google.com/scene-viewer/1.0?file=' + enc(GLB) +
    '&mode=ar_preferred&title=' + enc('Petronas Twin Towers') +
    '#Intent;scheme=https;package=com.google.android.googlequicksearchbox;action=android.intent.action.VIEW;S.browser_fallback_url=' +
    enc(sceneViewerHttps) + ';end;';

  const quickLookUrl = USDZ; // iOS Quick Look

  // --- Detect platform ---
  const ua = navigator.userAgent || navigator.vendor || window.opera;
  const isAndroid = /Android/i.test(ua);
  const isIOS     = /iPhone|iPad|iPod/i.test(ua);
  const isChrome  = /Chrome\/\d+/i.test(ua) && !/Edg\//i.test(ua);

  // --- Pick target ---
  let target = BASE; // fallback to homepage
  if (isIOS) {
    target = quickLookUrl;
  } else if (isAndroid) {
    target = isChrome ? sceneViewerIntent : sceneViewerHttps;
  }

  // --- Redirect instantly ---
  window.location.replace(target);
</script>
</body>
</html>

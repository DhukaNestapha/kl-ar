<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Petronas Twin Towers â€“ Begin AR</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { color-scheme: dark; }
    html, body {
      height:100%; margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
      background:#0b0d12; overflow:hidden; /* no scroll; poster is full bleed */
    }
    /* Poster as full-screen background (keeps text out of the way) */
    .poster {
      position:fixed; inset:0; width:100%; height:100%;
      object-fit:cover; object-position:center; background:#0b0d12;
    }
    /* Bottom gradient for legibility under the button */
    .bottom-scrim {
      position:fixed; left:0; right:0; bottom:0; height:30vh;
      background:linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,.55) 60%, rgba(0,0,0,.75) 100%);
      pointer-events:none;
    }
    /* Floating pill CTA (minimal footprint, safe-area aware) */
    .cta {
      position:fixed; left:50%;
      bottom:calc(16px + env(safe-area-inset-bottom, 0px));
      transform:translateX(-50%);
      display:flex; gap:10px; align-items:center; justify-content:center;
      z-index:2;
    }
    .btn {
      appearance:none; border:0; padding:12px 18px; border-radius:9999px; cursor:pointer; font-weight:700;
      background:#2b91ff; color:#fff;
      box-shadow:0 8px 22px rgba(43,145,255,.35), 0 1px 0 rgba(255,255,255,.08) inset;
    }
    .link {
      background:transparent; color:#eaf1ff; opacity:.9; text-decoration:underline; font-weight:600;
      padding:8px 0; border:0;
    }
    /* (Optional) tiny title top-left without blocking poster */
    .badge {
      position:fixed; left:12px; top:calc(12px + env(safe-area-inset-top, 0px));
      font-size:12px; letter-spacing:.3px; color:#cfe2ff; background:rgba(0,0,0,.35);
      border:1px solid rgba(255,255,255,.12); border-radius:9999px; padding:6px 10px; backdrop-filter:blur(4px);
    }
  </style>
</head>
<body>
  <!-- Full-bleed poster image -->
  <img class="poster" src="https://dhukanestapha.github.io/kl-ar/assets/poster.jpg?v=4" alt="Petronas Twin Towers poster" />

  <!-- Subtle title (can remove if you want zero chrome) -->
  <div class="badge">Petronas Twin Towers</div>

  <!-- Legibility scrim behind the CTA only -->
  <div class="bottom-scrim" aria-hidden="true"></div>

  <!-- Minimal controls: Begin AR + View 3D as link -->
  <div class="cta" role="group" aria-label="Actions">
    <button id="beginArBtn" class="btn" aria-label="Begin AR">Begin AR</button>
    <button id="view3dBtn" class="link" aria-label="View 3D on page">View 3D</button>
  </div>

<script>
  // --- Config (case-sensitive paths) ---
  const BASE = 'https://dhukanestapha.github.io/kl-ar';
  const GLB  = BASE + '/assets/petronas_twin_tower.glb';   // Android
  const USDZ = BASE + '/assets/PETRONAS_TWIN_TOWER.usdz';  // iOS
  const HOME = BASE + '/';                                  // your <model-viewer> page

  // Android Scene Viewer links
  const enc = encodeURIComponent;
  const sceneViewerHttps = 'https://arvr.google.com/scene-viewer/1.0?file=' + enc(GLB) +
                           '&mode=ar_preferred&title=' + enc('Petronas Twin Towers');
  const sceneViewerIntent = 'intent://arvr.google.com/scene-viewer/1.0?file=' + enc(GLB) +
                            '&mode=ar_preferred&title=' + enc('Petronas Twin Towers') +
                            '#Intent;scheme=https;package=com.google.android.googlequicksearchbox;' +
                            'action=android.intent.action.VIEW;S.browser_fallback_url=' + enc(sceneViewerHttps) + ';end;';
  const quickLookUrl = USDZ;

  // Device sniff
  const ua = navigator.userAgent || navigator.vendor || window.opera;
  const isAndroid = /Android/i.test(ua);
  const isIOS     = /iPhone|iPad|iPod/i.test(ua);
  const isChrome  = /Chrome\/\d+/i.test(ua) && !/Edg\//i.test(ua);

  function targetForDevice() {
    if (isIOS) return quickLookUrl;
    if (isAndroid) return isChrome ? sceneViewerIntent : sceneViewerHttps;
    return HOME; // desktop/unknown
  }

  // Button actions
  document.getElementById('beginArBtn').addEventListener('click', () => {
    window.location.assign(targetForDevice());
  });
  document.getElementById('view3dBtn').addEventListener('click', () => {
    window.location.assign(HOME);
  });
</script>
</body>
</html>
